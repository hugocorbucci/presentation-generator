<section class="main">
  <% @presentation.slides.each_with_index do |slide, index| %>
    <% unless slide.image.blank? %>
      <div class="slide" style="background: url(<%= slide.image %>) no-repeat center center;">
        <h1><%=slide.content%></h1>
        <!-- TODO Improve UX by allowing clicks to pass slide. Must degrade gracefully -->
      </div>
    <% end %>
  <% end %>
</section>

<script>
  $(document).keydown(function(e){
    if (e.which == 38) { 
      return changeTo(function(slide) {
        return $(".slide:first");
      });
    }
    else if (e.which == 40) { 
      return changeTo(function(slide) {
        return $(".slide:last");
      });
    }
    else if (e.which == 37) { 
      return changeTo(function(slide) {
        return slide.prev('.slide');
      });
    } else if (e.which == 39) { 
      return changeTo(function(slide) {
        return slide.next('.slide');
      });
    }
  });
  $(function() {
    $(".slide").hide();
    $(".slide:first-child").fadeIn();
  });
</script>